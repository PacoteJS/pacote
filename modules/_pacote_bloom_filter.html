<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@pacote/bloom-filter | Pacote</title><meta name="description" content="Documentation for Pacote"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Pacote</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">Pacote</a></li><li><a href="_pacote_bloom_filter.html">@pacote/bloom-filter</a></li></ul><h1>Module @pacote/bloom-filter</h1></div><section class="tsd-panel tsd-typography"><a id="md:pacotebloom-filter" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@pacote/bloom-filter<a href="#md:pacotebloom-filter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p><img src="https://badgen.net/npm/v/@pacote/bloom-filter" alt="version">
<img src="https://badgen.net/bundlephobia/min/@pacote/bloom-filter" alt="minified">
<img src="https://badgen.net/bundlephobia/minzip/@pacote/bloom-filter" alt="minified + gzip"></p>
<p>A Bloom filter is a space-efficient probabilistic data structure that allows
testing whether an element belongs to a set.</p>
<p>Bloom filters relax result accuracy for this efficiency. With Bloom filters,
false positive matches are possible, but false negatives are not. That is to
say, while it can tell you with certainty when an element is not in a set, any
positive responses indicate only a possibility.</p>
<p>This false positive error rate can be lowered — but never completely eliminated
— by increasing the size of the filter and/or the number of hashes computed for
each element.</p>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@pacote/bloom-filter</span>
</code><button type="button">Copy</button></pre>

<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">BloomFilter</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@pacote/bloom-filter&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">filter</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">BloomFilter</span><span class="hl-1">({ </span><span class="hl-4">size:</span><span class="hl-1"> </span><span class="hl-7">22056</span><span class="hl-1">, </span><span class="hl-4">hashes:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1"> })</span><br/><br/><span class="hl-4">filter</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-2">&#39;foo&#39;</span><span class="hl-1">)</span><br/><span class="hl-4">filter</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-2">&#39;bar&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-4">filter</span><span class="hl-1">.</span><span class="hl-0">has</span><span class="hl-1">(</span><span class="hl-2">&#39;foo&#39;</span><span class="hl-1">) </span><span class="hl-6">// -&gt; true</span><br/><span class="hl-4">filter</span><span class="hl-1">.</span><span class="hl-0">has</span><span class="hl-1">(</span><span class="hl-2">&#39;bar&#39;</span><span class="hl-1">) </span><span class="hl-6">// -&gt; true</span><br/><span class="hl-4">filter</span><span class="hl-1">.</span><span class="hl-0">has</span><span class="hl-1">(</span><span class="hl-2">&#39;baz&#39;</span><span class="hl-1">) </span><span class="hl-6">// -&gt; false</span>
</code><button type="button">Copy</button></pre>

<a id="md:bloomfilter" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>BloomFilter&lt;T extends { toString(): string }&gt;</code><a href="#md:bloomfilter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>BloomFilter</code> builds a data structure that may be used to test the membership of
any <code>String</code>-serialisable value (i.e. an object which implements the
<code>toString()</code> method).</p>
<p>Because a Bloom filter is so simple, it cannot handle removing elements. You may
use a <code>CountingBloomFilter</code> for that.</p>
<p>The class constructor takes an <code>Options</code> object with the following properties:</p>
<ul>
<li>
<p><code>size</code> (<code>number</code>, required) determines the size of the filter in bits. The
value is required and must not be negative.</p>
</li>
<li>
<p><code>hashes</code> (<code>number</code>, required) sets the number of distinct hashes that need to
be calculated. A higher number performs more slowly, but lowers the
probability of false positives occuring. The value is required and must be a
positive integer.</p>
</li>
<li>
<p><code>seed</code> (<code>number</code>) sets the seed for the hashing function. The default is
<code>0x00c0ffee</code>.</p>
</li>
<li>
<p><code>filter</code> (<code>BloomFilter&lt;T&gt;</code>) allows initialising the filter from an array of
unsigned 32-bit integers.</p>
</li>
</ul>
<p>Class instances may be serialised into JSON using <code>JSON.stringify()</code> for storage
or for sending over the network. The JSON string can then be deserialised and
fed back into the constructor to recreate the original Bloom filter.</p>
<a id="md:addelement-t-void" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><code>add(element: T): void</code><a href="#md:addelement-t-void" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>add()</code> method mutates to filter to indicate that the provided serialisable
element is present.</p>
<a id="md:haselement-t-boolean" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><code>has(element: T): boolean</code><a href="#md:haselement-t-boolean" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>has()</code> method checks the filter for membership of the provided value. If
<code>false</code>, it is guaranteed not to be present. Otherwise, there's the possibility
of it being a false positive result.</p>
<a id="md:countingbloomfilter" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>CountingBloomFilter&lt;T extends { toString(): string }&gt;</code><a href="#md:countingbloomfilter" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>CountingBloomFilter</code> builds a data structure that may be used to test the
membership of any <code>String</code>-serialisable value (i.e. an object which implements
the <code>toString()</code> method). It's a generalisation of <code>BloomFilter</code> that counts the
number of times an element was added to the set.</p>
<p>Unlike the simpler <code>BloomFilter</code>, this class supports element removal.</p>
<p>The class constructor takes an <code>Options</code> object with the following properties:</p>
<ul>
<li>
<p><code>size</code> (<code>number</code>, required) determines the number of filter counters. The
value is required and must not be negative.</p>
</li>
<li>
<p><code>hashes</code> (<code>number</code>, required) sets the number of distinct hashes that need to
be calculated. A higher number performs more slowly, but lowers the
probability of false positives occuring. The value is required and must be a
positive integer.</p>
</li>
<li>
<p><code>seed</code> (<code>number</code>) sets the seed for the hashing function. The default is
<code>0x00c0ffee</code>.</p>
</li>
<li>
<p><code>filter</code> (<code>BloomFilter&lt;T&gt;</code>) allows initialising the filter from an array of
unsigned 32-bit integers.</p>
</li>
</ul>
<p>Class instances may be serialised into JSON using <code>JSON.stringify()</code> for storage
or for sending over the network. The JSON string can then be deserialised and
fed back into the constructor to recreate the original Bloom filter.</p>
<a id="md:addelement-t-void-1" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><code>add(element: T): void</code><a href="#md:addelement-t-void-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>add()</code> method mutates to filter and increments its counters to indicate
an instance of the element was added.</p>
<a id="md:removeelement-t-void" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><code>remove(element: T): void</code><a href="#md:removeelement-t-void" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>remove()</code> method mutates to filter and decrements its counters to indicate
an instance of the element was removed.</p>
<a id="md:haselement-t-number" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><code>has(element: T): number</code><a href="#md:haselement-t-number" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>has()</code> method checks the filter for membership of the provided element and
returns the possible number of times it was added to the filter.</p>
<p>As with regular Bloom filters, there is a possibility of the result being a
false positive, meaning the element may have been added fewer times than
the returned value indicates.</p>
<a id="md:optimalitems-number-errorrate-number-options" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>optimal(items: number, errorRate: number): Options</code><a href="#md:optimalitems-number-errorrate-number-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>optimal()</code> helper function calculates the optimal Bloom filter <code>size</code> and
<code>hashes</code> options based on the number of items in the filter (<em>n</em>) and the
desired false positive error rate (<em>ε</em>).</p>
<p>The size of the filter, or <em>m</em>, is calculated with:</p>
<p><img src="../media/optimal-size.svg" alt=""></p>
<p>The number of hashes, or <em>k</em>, is determined by the formula:</p>
<p><img src="../media/optimal-hashes.svg" alt=""></p>
<a id="md:hashing-algorithms" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Hashing algorithms<a href="#md:hashing-algorithms" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This class depends on <a href="https://www.npmjs.com/package/xxhashjs" target="_blank" class="external"><code>xxhashjs</code></a> for
an implementation of the <a href="https://cyan4973.github.io/xxHash/" target="_blank" class="external">fast XXH64 non-cryptographic hashing algorithm</a>
to build and search the filter via enhanced double hashing.</p>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT © <a href="https://goblindegook.com" target="_blank" class="external">Luís Rodrigues</a>.</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Classes</h3><div class="tsd-index-list"><a href="../classes/_pacote_bloom_filter.BloomFilter.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Bloom<wbr/>Filter</span></a>
<a href="../classes/_pacote_bloom_filter.CountingBloomFilter.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Counting<wbr/>Bloom<wbr/>Filter</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Functions</h3><div class="tsd-index-list"><a href="../functions/_pacote_bloom_filter.optimal.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-64"></use></svg><span>optimal</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:pacotebloom-filter"><span>@pacote/bloom-<wbr/>filter</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:bloomfilter"><span>Bloom<wbr/>Filter&lt;<wbr/>T extends { to<wbr/>String(): string }&gt;</span></a></li><li><ul><li><a href="#md:addelement-t-void"><span>add(element: <wbr/>T): void</span></a></li><li><a href="#md:haselement-t-boolean"><span>has(element: <wbr/>T): boolean</span></a></li></ul></li><li><a href="#md:countingbloomfilter"><span>Counting<wbr/>Bloom<wbr/>Filter&lt;<wbr/>T extends { to<wbr/>String(): string }&gt;</span></a></li><li><ul><li><a href="#md:addelement-t-void-1"><span>add(element: <wbr/>T): void</span></a></li><li><a href="#md:removeelement-t-void"><span>remove(element: <wbr/>T): void</span></a></li><li><a href="#md:haselement-t-number"><span>has(element: <wbr/>T): number</span></a></li></ul></li><li><a href="#md:optimalitems-number-errorrate-number-options"><span>optimal(items: number, error<wbr/>Rate: number): <wbr/>Options</span></a></li></ul></li><li><a href="#md:hashing-algorithms"><span>Hashing algorithms</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Pacote</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
